<?xml version="1.0" encoding="UTF-8"?>
        <!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.echowish.android_backgroud.dao.PostMapper">

    <resultMap id="postResultMapper" type="com.echowish.android_backgroud.pojo.Post">
        <id property="postId" column="post_id"></id>
        <result property="userId" column="user_id"></result>
        <result property="title" column="title"></result>
        <result property="zone" column="zone"></result>
        <result property="content" column="content"></result>
        <result property="reward" column="reward"></result>
        <result property="postImage" column="post_image"></result>
        <result property="time" column="time"></result>
    </resultMap>

    <resultMap id="partPostResultMapper" type="com.echowish.android_backgroud.pojo.PartPost">
        <id property="postId" column="post_id"></id>
        <result property="title" column="title"></result>
        <result property="zone" column="zone"></result>
        <result property="content" column="content"></result>
    </resultMap>

    <resultMap id="myPublishPostResultMapper" type="com.echowish.android_backgroud.pojo.MyPublishPost">
        <id property="postId" column="post_id"></id>
        <result property="title" column="title"></result>
        <result property="zone" column="zone"></result>
        <result property="content" column="content"></result>
        <result property="time" column="time"></result>
    </resultMap>


    <insert id="insertPost" parameterType="com.echowish.android_backgroud.pojo.Post">
        insert into post(post_id,user_id,title,zone,content,reward,post_image,`time`)
        values(#{postId},#{userId},#{title},#{zone},#{content},#{reward},#{postImage},#{time})
    </insert>

    <select id="queryImageByPostId" parameterType="java.lang.Integer" resultType="java.lang.String">
        select  post_image from post  where post_id=#{postId}
    </select>

    <delete id="deleteByPostId" parameterType="java.lang.Integer">
        delete from post where post_id=#{postId};
    </delete>

    <select id="queryPost" resultMap="postResultMapper" parameterType="java.lang.Integer">
        select *from post where post_id=#{postId};
    </select>

    <select id="queryPostTitleByPostId" resultType="java.lang.String" parameterType="java.lang.Integer">
        select title from post where post_id=#{postId};
    </select>

    <select id="queryAllPartPost" resultMap="partPostResultMapper">
        select post_id,title,zone,content from post;
    </select>

    <select id="queryAllPartPostByZone" resultMap="partPostResultMapper" parameterType="java.lang.String">
        select post_id,title,zone,content from post  where zone=#{zone};
    </select>

    <select id="queryAllPartPostByKeyword" resultMap="partPostResultMapper" parameterType="java.lang.String">
        select post_id,title,zone,content from post  where title like '%${keyword}%' or content like '%${keyword}%';
    </select>

    <select id="queryAllPartPostByZoneAndKeyWord" resultMap="partPostResultMapper">
        select post_id,title,zone,content from post  where (title like '%${keyword}%' or content like '%${keyword}%') and zone=#{zone};
    </select>

    <select id="queryMyPublishPostByUserId" resultMap="myPublishPostResultMapper">
        select post_id,title,zone,content,time from post  where user_id=#{userId};
    </select>
</mapper>